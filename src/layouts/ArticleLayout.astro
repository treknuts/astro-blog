---
import BaseLayout from "./BaseLayout.astro";
import FontAwesomeArrow from "../components/FontAwesomeArrow.astro";
import formatDate from "../scripts/format-date";
import "../styles/global.css";
import { Image } from "astro:assets";
import TagCard from "../components/TagCard.astro";

const { frontmatter } = Astro.props;
const formatted = formatDate(frontmatter.pubDate);
---

<style>
  .image-wrapper {
    width: 100%;
  }

  .image-wrapper > img {
    border-radius: 2em;
    object-fit: cover;
    width: 100%;
    height: 100%;
  }

  .tags-container {
    padding: 2em;
    border-radius: 0.5em;
    display: flex;
    flex-wrap: wrap;
    border: 1px solid var(--secondary);
    justify-content: center;
    gap: 2em;
  }

  .author span {
    font-weight: 900;
    color: var(--primary);
  }

  .nav-back {
    position: relative;
    text-decoration: none;
    color: inherit;
    display: flex;
    align-items: center;
    gap: 0.35em;
    width: max-content;
  }

  .nav-back::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background-color: var(--primary);
    scale: 0 1;
    transition: scale 250ms ease;
  }

  .nav-back:hover::after {
    scale: 1 1;
  }
</style>
<BaseLayout pageTitle={frontmatter.title}>
  <a href="/blog" class="nav-back">
    <FontAwesomeArrow height="1.5em" />Back to blog
  </a>
  <p>{formatted}</p>
  <div class="image-wrapper">
    <Image
      transition:name={frontmatter.slug}
      src={frontmatter.image.url}
      alt={frontmatter.image.alt}
      width="1920"
      height="1080"
    />
  </div>
  <p class="author">
    Photo credit: <span>{frontmatter.image.credit}</span>
  </p>
  <p class="author">
    Written by <span>{frontmatter.author}</span>
  </p>
  <slot />
  <h2>Tags</h2>
  <div class="tags-container">
    {
      frontmatter.tags.map((tag) => {
        return <TagCard tag={tag} />;
      })
    }
  </div>
</BaseLayout>
