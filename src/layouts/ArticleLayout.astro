---
import BaseLayout from "./BaseLayout.astro";
import Badge from "../components/Badge.astro";
import FontAwesomeArrow from "../components/FontAwesomeArrow.astro";
import "../styles/global.css";
import { Image } from "astro:assets";

const { frontmatter } = Astro.props;
const formatted = new Date(frontmatter.pubDate).toLocaleDateString("en-us", {
  weekday: "long",
  year: "numeric",
  month: "short",
  day: "numeric",
});
---

<style>
  .article-container {
    margin: 0 auto;
    width: min(100vh - 2em, 80ch);
  }
  img {
    border-radius: 2em;
    width: 100%;
    height: auto;
    max-height: 500px;
    object-fit: cover;
  }

  .tags-container {
    padding: 2em;
    border-radius: 0.5em;
    background: var(--secondary);
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 2em;
  }

  .author span {
    font-weight: 900;
    color: var(--primary);
  }

  .nav-back {
    position: relative;
    text-decoration: none;
    color: inherit;
    display: flex;
    align-items: center;
    gap: 0.35em;
    width: max-content;
  }

  .nav-back::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background-color: var(--primary);
    scale: 0 1;
    transition: scale 250ms ease;
  }

  .nav-back:hover::after {
    scale: 1 1;
  }
</style>
<BaseLayout pageTitle={frontmatter.title}>
  <a href="/blog" class="nav-back">
    <FontAwesomeArrow height="1.5em" />Back to blog
  </a>
  <p>{formatted}</p>
  <Image
    transition:name={frontmatter.slug}
    src={frontmatter.image.url}
    alt={frontmatter.image.alt}
    width="775"
    height="500"
  />
  <p class="author">
    Written by <span>{frontmatter.author}</span>
  </p>
  <slot />
  <h2>Tags</h2>
  <div class="tags-container">
    {
      frontmatter.tags.map((tag) => {
        return <Badge name={tag} />;
      })
    }
  </div>
</BaseLayout>
